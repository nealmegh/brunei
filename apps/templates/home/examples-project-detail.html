{% extends "layouts/base.html" %}

{% block title %} Project Detail {% endblock %} 

<!-- Element injected in the BODY element -->
{% block body_class %} sidebar-mini {% endblock body_class %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}


  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/static/assets/plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="/static/assets/css/adminlte.min.css">
    <style>
    #map { height: 500px; }
    </style>

{% endblock stylesheets %}

{% block content %}  

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Acacia Detection</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="{{ url_for('home_blueprint.index') }}">Home</a></li>
              <li class="breadcrumb-item active">Data Detail</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">

      <!-- Default box -->
      <div class="card">
{#        <div class="card-header">#}
{#          <h3 class="card-title">Data Detail</h3>#}
{##}
{#          <div class="card-tools">#}
{#            <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">#}
{#              <i class="fas fa-minus"></i>#}
{#            </button>#}
{#            <button type="button" class="btn btn-tool" data-card-widget="remove" title="Remove">#}
{#              <i class="fas fa-times"></i>#}
{#            </button>#}
{#          </div>#}
{#        </div>#}
        <div class="card-body">
          <div class="row">
            <div class="col-12 col-md-12 col-lg-6 order-2 order-md-1">

              <div class="row">
                <div class="col-12">
                  <h4>Detected Area</h4>
                    <img data-enlargable src="{{picture.path}}" alt="Click to Enlarge" style=" height: 500px !important; width: 768px !important;">
                </div>
              </div>
              <div class=" row mt-3">
                   <div class="col-12 col-sm-4">
                        <!-- small box -->
                        <div class="small-box bg-success">
                          <div class="inner">
                            <h3>{{ '%0.2f'| format(picture.area_coverage*100|float)}}<sup style="font-size: 20px">%</sup></h3>
{#                            <span class="info-box-number text-center text-muted mb-0">{{ '%0.2f'| format(picture.area_coverage*100|float)}}%</span>#}
                            <p>Covered in Acacia (percentage)</p>
{#                            <span class="info-box-text text-center text-muted">Covered in Acacia (percentage)</span>#}
                          </div>
                          <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                          </div>
            {#              <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>#}
                        </div>
                    </div>
{#                <div class="col-12 col-sm-4">#}
{#                  <div class="info-box bg-light">#}
{#                    <div class="info-box-content">#}
{#                      <span class="info-box-text text-center text-muted">Covered in Acacia (percentage)</span>#}
{#                      <span class="info-box-number text-center text-muted mb-0">{{ '%0.2f'| format(picture.area_coverage*100|float)}}%</span>#}
{#                    </div>#}
{#                  </div>#}
{#                </div>#}
                  <div class="col-12 col-sm-4">
                        <!-- small box -->
                        <div class="small-box bg-warning">
                          <div class="inner">
                            <h3>{{ 98}} <sup style="font-size: 20px">Sqr Meter</sup></h3>
{#                            <span class="info-box-number text-center text-muted mb-0">{{ '%0.2f'| format(picture.area_coverage*100|float)}}%</span>#}
                            <p>Total Area Covered by Acacia</p>
{#                            <span class="info-box-text text-center text-muted">Covered in Acacia (percentage)</span>#}
                          </div>
                          <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                          </div>
            {#              <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>#}
                        </div>
                  </div>

                   <div class="col-12 col-sm-4">
                        <!-- small box -->
                        <div class="small-box bg-gradient-danger">
                          <div class="inner">
                            <h3>{{ 85}} <sup style="font-size: 20px">%</sup></h3>
{#                            <span class="info-box-number text-center text-muted mb-0">{{ '%0.2f'| format(picture.area_coverage*100|float)}}%</span>#}
                            <p>Detection Accuracy (Percentage)</p>
{#                            <span class="info-box-text text-center text-muted">Covered in Acacia (percentage)</span>#}
                          </div>
                          <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                          </div>
            {#              <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>#}
                        </div>
                  </div>
              </div>
                <div class="row">
                    <div class="col-12 col-sm-4">
                        <!-- small box -->
                        <a target="_blank" href="http://maps.google.com/maps?t=k&q=loc:{{ picture.latitude }}+{{ picture.longitude }}">
                        <div class="small-box bg-info">
                          <div class="inner">
                            <h3>view</h3>
{#                            <span class="info-box-number text-center text-muted mb-0">{{ '%0.2f'| format(picture.area_coverage*100|float)}}%</span>#}
                            <p>View on Satellite</p>
{#                            <span class="info-box-text text-center text-muted">Covered in Acacia (percentage)</span>#}
                          </div>
                          <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                          </div>
            {#              <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>#}
                        </div>
                        </a>
                  </div>
                   <div class="col-12 col-sm-4">
                        <!-- small box -->
                        <div class="small-box bg-dark">
                          <div class="inner">
                            <h3>{{ 100 }}<sup style="font-size: 20px">Meter</sup></h3>
{#                            <span class="info-box-number text-center text-muted mb-0">{{ '%0.2f'| format(picture.area_coverage*100|float)}}%</span>#}
                            <p>Height of the Picture</p>
{#                            <span class="info-box-text text-center text-muted">Covered in Acacia (percentage)</span>#}
                          </div>
                          <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                          </div>
            {#              <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>#}
                        </div>
                  </div>
{#                    <div class="col-12 col-sm-4">#}
{#                      <div class="info-box bg-light">#}
{#                        <div class="info-box-content">#}
{#                          <span class="info-box-text text-center text-muted">View on Satellite</span>#}
{#                          <span class="info-box-number text-center text-muted mb-0"><a target="_blank" href="http://maps.google.com/maps?t=k&q=loc:{{ picture.latitude }}+{{ picture.longitude }}">view</a></span>#}
{#                        </div>#}
{#                      </div>#}
{#                    </div>#}
{#                    <div class="col-12 col-sm-4">#}
{#                      <div class="info-box bg-light">#}
{#                        <div class="info-box-content">#}
{#                          <span class="info-box-text text-center text-muted">Height of the Picture</span>#}
{#                          <span class="info-box-number text-center text-muted mb-0">100 Meter</span>#}
{#                        </div>#}
{#                      </div>#}
{#                    </div>#}
{#                    <div class="col-12 col-sm-4">#}
{#                      <div class="info-box bg-light">#}
{#                        <div class="info-box-content">#}
{#                          <span class="info-box-text text-center text-muted">Detection Accuracy (Percentage)</span>#}
{#                          <span class="info-box-number text-center text-muted mb-0">85%</span>#}
{#                        </div>#}
{#                      </div>#}
{#                    </div>#}
                </div>

            </div>
            <div class="col-12 col-md-12 col-lg-6 order-1 order-md-2">
                <div class="row">
                <div class="col-12">
                  <h4>Map Area</h4>
                    <div id="map"></div>
                </div>
              </div>
                <div class="row mt-3">
                      <h3 class="text-primary">
{#                          <i class="fas fa-paint-brush"></i> #}
                          Description</h3>
                    <br>

                </div>
                <div class="row mt-1">
                    <p class="text-muted">
                        {{ picture.description}}
                    </p>
                </div>
                <div class="row mt-3">
                    <h3 class="text-primary">
{#                          <i class="fas fa-paint-brush"></i> #}
                          Tags</h3>
                </div>
                <div class="row mt-1">
                    <p class="text-muted">
                        {{ picture.tags}}
                    </p>
                      <div class="text-center mt-5 mb-3 col-md-12">
{#                        <a href="{{picture.path}}" target="_blank" class="btn btn-sm btn-primary">Large Image</a>#}
                        <a href="{{ url_for('pictures_blueprint.all_data') }}" class="btn btn-sm btn-warning">Go to Table</a>
                      </div>
                </div>
            </div>
          </div>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <!-- jQuery -->
  <script src="/static/assets/plugins/jquery/jquery.min.js"></script>
  <!-- Bootstrap 4 -->
  <script src="/static/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE App -->
{#  <script src="/static/assets/js/adminlte.min.js"></script>#}
  <!-- AdminLTE for demo purposes -->
  <script src="/static/assets/js/demo.js"></script>

{#  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin="">#}
  <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js" integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>
  <script href="/static/assets/js/leaflet-beautify-marker-icon.js"></script>
  <script>
            let lat = {{ picture.latitude }};
            let long = {{ picture.longitude }};


            let geo_json = {{ picture.geo_codes | tojson}};

            let geo_codes = JSON.parse(geo_json);


        {#     console.log(geo_codes[0][0]);#}
        var map = L.map('map').setView([geo_codes[0][0], geo_codes[0][1]], 20);

        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        {#L.marker([lat, long]).addTo(map)#}
        {#    .bindPopup('Detected Area<br> ')#}
        {#    .openPopup();#}
let i = 0;
let options = {
                iconShape: 'circle-dot',
                borderWidth: 5,
                borderColor: 'red'
            };
           {% for key in geo_codes %}
                if(i <= {{ key }})
                {
                     {#L.marker([ geo_codes[i][0], geo_codes[i][1]], {#}
                     {#       icon: L.BeautifyIcon.icon(options),#}
                     {#       draggable: false,#}
                     {#   }).addTo(map).bindPopup("popup").bindPopup(#}
                     {#       'Acacia'#}
                     {#   );#}
                     L.marker([ geo_codes[i][0], geo_codes[i][1]]).addTo(map)
                    .bindPopup('Detected Area<br> ')
                    .openPopup();
                }

               i++;
           {% endfor %}



  </script>
    <script>
            $('img[data-enlargable]').addClass('img-enlargable').click(function(){
            var src = $(this).attr('src');
            $('<div>').css({
                background: 'RGBA(0,0,0,.5) url('+src+') no-repeat center',
                backgroundSize: 'contain',
                width:'100%', height:'100%',
                position:'fixed',
                zIndex:'10000',
                top:'0', left:'0',
                cursor: 'zoom-out'
            }).click(function(){
                $(this).remove();
            }).appendTo('body');
        });
    </script>
{% endblock javascripts %}
